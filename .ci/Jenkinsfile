pipeline {
    agent any
    options {
        ansiColor('xterm')
        buildDiscarder(logRotator(numToKeepStr: '5', artifactNumToKeepStr: '5'))
    }

    stages {

        stage('START') {
            steps {
                echo "START"
            }
        }

        stage ("Prompt for input") {
            steps {
                script {
                env.USERNAME = input message: 'Please enter the username',
                                    parameters: [string(defaultValue: '',
                                                description: '',
                                                name: 'Username')]
                env.PASSWORD = input message: 'Please enter the password',
                                    parameters: [password(defaultValue: '',
                                                description: '',
                                                name: 'Password')]
                }
                echo "Username: ${env.USERNAME}"
                echo "Password: ${env.PASSWORD}"
            }
        }
    
        stage('failifnoop') {
            when {
                anyOf {
                    expression { env.STACKABLE_OPERATOR == null }
                }
            }
            steps {
                error('no operator selected')
            }
        }

        stage('check') {
            when {
                allOf {
                    expression { env.STACKABLE_OPERATOR != null }
                }
            }
            steps {
                echo "Testing the operator: ${env.STACKABLE_OPERATOR}"
            }
        }

        stage('STOP') {
            steps {
                echo "STOP"
            }
        }

    }
}


